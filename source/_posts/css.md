---
title: CSS知识小记
tags:
  - CSS
categories:
  - CSS
photos:
  - 
mathjax: false
description: 记录了CSS相关的知识点、技巧和常见问题等
date: 2016-06-23 16:49:05
---

* 记录了CSS相关的知识点、技巧和常见问题等

{% asset_img logo.jpg 图片来源：google %}

<!--more-->

## 使用CSS

### 使用方式

1、内联样式表
```html
<p style="color: sienna; margin-left: 20px">
This is a paragraph
</p>
```

2、内嵌（内部）样式表
```html
<head>
<style type="text/css">
  hr {color: sienna;}
  p {margin-left: 20px;}
  body {background-image: url("images/back40.gif");}
</style>
</head>
```

3、外部样式表 - 链接式
```html
<head>
<link rel="stylesheet" type="text/css" href="mystyle.css" />
</head>
```

4、外部样式表 - 导入式
```html
<style>
  @import url(mystyle.css)
</style>
```

### 链接式和导入式区别
1、类型不同

* 加载方式不同
  * 链接式使用的是HTML标签<link>，<link>除了加载CSS文件外，还可以定义RSS、rel链接属性等
  * 导入式的@import是CSS提供的方法，只能加载样式表

* 加载顺序不同
  * 在页面被加载时，<link>引用的CSS文件会同时被加载，不影响用户体验
  * @import引用的文件则是等页面下载完才被加载，当网速慢时，容易出现先缺少样式后正常显示的闪烁现象

* 兼容性
  * <link>属于HTML标签，没有兼容性问题
  * @import是CSS2.1提出的所以老的浏览器不支持，@import只有在IE5以上的才能识别

* 使用dom控制样式时的差别
  * 当使用javascript控制dom去改变样式的时候，只能使用link标签
  * @import不是dom可以控制的   

-------------

## 盒模型

### 标准盒模型和怪异盒模型

{% asset_img boxModel.png 图片来源：MDN %}

1、标准盒模型

* 标准盒模型在pc端比较常用，因为pc端的屏幕大，有优势可以撑

```
盒子总宽度/高度 = width/height + padding + border + margin
```

2、怪异盒模型

* 怪异盒模型在手机端比较常用，因为手机屏幕是有限大小的，有时需要使用怪异盒模型把它固定住

```
盒子总宽度/高度 = width/height + margin = 内容区宽度/高度 + padding + border + margin
```

3、使用`box-sizing`决定盒模型类型

* CSS3属性`box-sizing`可以决定采用哪种盒模型，它有两个值一个是`content-box`，另一个是`border-box`
* 当设置为`box-sizing:content-box`时
    * 将采用标准模式解析计算，也是默认模式
    * `width`, `min-width`, `max-width`, `height`, `min-height` 与 `max-height` 控制内容大小
* 当设置为`box-sizing:border-box`时，将采用怪异模式解析计算


### margin 外边距叠加
1、现象描述

* 当两个或更多个垂直边距相遇时，它们将形成一个外边距
* 这个外边距的高度等于两个发生叠加的外边距的高度中的较大者
* 只有普通文档流中块框的垂直外边距才会发生外边距叠加
* 行内框、浮动框或绝对定位框之间的外边距不会叠加

2、三种发生情况

* 元素自身叠加
    * 当元素没有内容（即空元素）、内边距、边框时，它的上下边距就相遇了，即会产生叠加（垂直方向）
    * 当为元素添加内容、内边距、边框任何一项，就会取消叠加
* 相邻元素叠加
    * 相邻的两个元素，如果它们的上下边距相遇，即会产生叠加
* 包含（父子）元素叠加
    * 包含元素的外边距隔着父元素的内边距和边框，当这两项都不存在的时候，父子元素垂直外边距相邻，产生叠加
    * 添加任何一项即会取消叠加


-------------

## 选择器

### 层叠优先级
1、默认优先级

* 内联式（行内） > 内嵌（内部） > 外部 > 浏览器缺省，但是内嵌 > 外部
* 有一个前提：内嵌css样式的位置一定在外部式的后面。

2、就近原则
离被设置元素越近优先级别越高，*但注意上面所总结的优先级是有一个前提：内联式、嵌入式、外部式样式表中css样式是在的相同权值的情况下*。

### 选择器优先级和权重
1、选择器优先级
important > 内联 > ID > 类 > 标签 | 伪类 | 属性选择 > 伪对象 > 继承 > 通配符

2、选择器权重值计算

* A：如果规则是写在标签的style属性中（内联样式），则A=1，否则，A=0. 对于内联样式，由于没有选择器，所以B、C、D的值都为0，即A=1, B=0, C=0, D=0（简写为1,0,0,0，下同）；

* B：计算该选择器中ID的数量。（例如，#header 这样的选择器，计算为0, 1, 0, 0）；

* C：计算该选择器中伪类及其它属性的数量（包括class、属性选择器等，不包括伪元素）。 （例如，.logo[id='site-logo'] 这样的选择器，计算为0, 0, 2, 0）

* D：计算该选择器中伪元素及标签的数量。（例如，p:first-letter 这样的选择器，计算为0, 0, 0, 2）

根据规范，计算权重值时，A,B,C,D四组值，从左到右，分组比较，如果A相同，比较B，如果B相同，比较C，如果C相同，比较D，如果D相同，后定义的优先

3、总结
* 一条样式规则的整体权重值包含四个独立的部分：[A, B, C, D];

* A表示内联样式，只有1或者0两个值；

* B表示规则中ID的数量；

* C表示规则中除了ID、标签和伪元素以外的其它选择器数量；

* D表示规则中标签和伪元素的数量；

* *比较时从高位到低位（从A到D）分别比较，高位相同才需要比较低位*；

* 有 !important 标记的属性权重值无视没用 !important 指定的一切情况；

* 多次指定 !important 时，相互抵销。

-------------


## 怪异问题

### 1px on retina
1、现象描述

* 设置`border: 1px solid #ccc`来实现1px边框
* 但是在retina屏上因为设备像素比的不同，边框在移动设备上的表现也不相同：1px可能会被渲染成1.5px, 2px, 2.5px, 3px....，在用户体验上略差
* 直接表现为四周边框粗细不一致，可能上面和左边的边框线比右边和下面的边框线细，也有可能直接就是0px

2、原因分析

* 引起该问题的原因还是在于设备DPR不一样

3、解决方案

* 将边框设置为`0.5px`，适用于IE8+
* 优点是原生、支持圆角
* 缺点是目前只有IOS8+才支持，在IOS7及其以下、安卓系统都是显示为0px

4、注意

* 有些机型在`1px`时显示比较好，但是有些机型显示不佳，如果全一刀切设置为`0.5px`，可能会引起本来显示正常的机型也异常显示
* 因此有时候可以视具体情况使用媒体查询来对某些机型做特殊hack处理

-------------
